#!/bin/sh

# Get current branch name
BRANCH_NAME=$(git rev-parse --abbrev-ref HEAD)

# Allowed branch prefixes
ALLOWED_PREFIXES="^(feature/|docs/|task/|bugfix/|hotfix/)"

if ! echo "$BRANCH_NAME" | grep -Eq "$ALLOWED_PREFIXES"; then
  echo "‚ùå ERROR: Branch name '$BRANCH_NAME' is not allowed."
  echo "‚úÖ Allowed prefixes: feature/, docs/, task/, bugfix/, hotfix/"
  exit 1
fi

echo "‚úÖ Branch name '$BRANCH_NAME' is valid."

# Run linting before committing
echo "üîç Running lint..."
npm run lint || exit 1
